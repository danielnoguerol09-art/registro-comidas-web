<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">

    <!-- üëá ESTA L√çNEA ES LA QUE HACE QUE SE VEA BIEN EN IPHONE -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Registro de Comidas</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/static/style.css">

    <!-- ICONOS -->
    <link rel="apple-touch-icon" sizes="180x180" href="/static/icon.png">
    <link rel="icon" type="image/png" href="/static/icon.png">

    <!-- PWA -->
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#ffffff">

    <!-- Permitir instalaci√≥n en iPhone -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <!-- Service Worker -->
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("/static/sw.js");
        }
    </script>

</head>

<body>

<h1>Registro de Comidas</h1>

<a href="/agregar" class="btn">Agregar nueva comida</a>

<h3>Filtrar</h3>

<form method="GET" action="/">
    <label>Fecha:</label>
    <select name="fecha">
        <option value="">Todas</option>
        {% for f in fechas %}
        <option value="{{ f }}" {% if filtro_fecha == f %}selected{% endif %}>{{ f }}</option>
        {% endfor %}
    </select>

    <label>Tipo:</label>
    <select name="tipo">
        <option value="">Todos</option>
        <option value="Desayuno" {% if filtro_tipo == "Desayuno" %}selected{% endif %}>Desayuno</option>
        <option value="Almuerzo" {% if filtro_tipo == "Almuerzo" %}selected{% endif %}>Almuerzo</option>
        <option value="Merienda" {% if filtro_tipo == "Merienda" %}selected{% endif %}>Merienda</option>
        <option value="Cena" {% if filtro_tipo == "Cena" %}selected{% endif %}>Cena</option>
        <option value="Snack" {% if filtro_tipo == "Snack" %}selected{% endif %}>Snack</option>
    </select>

    <button type="submit">Aplicar</button>
</form>

<hr>

<h2>Historial</h2>

{% if registros %}
    {% for r in registros %}
        <div class="card">
            <p><strong>Fecha:</strong> {{ r[0] }}</p>
            <p><strong>Hora:</strong> {{ r[1] }}</p>
            <p><strong>Tipo:</strong> {{ r[2] }}</p>
            <p><strong>Descripci√≥n:</strong> {{ r[3] }}</p>
        </div>
    {% endfor %}
{% else %}
    <p>No hay registros.</p>
{% endif %}

</body>
</html>